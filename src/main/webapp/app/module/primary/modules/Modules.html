<div class="jhipster-modules" v-if="content.isLoading()" data-selector="modules-loader">Loading</div>
<div class="jhipster-modules" v-else data-selector="modules-list">
  <aside class="jhipster-modules-form">
    <h2>Modules</h2>

    <div class="jhipster-modules-form--field-line">
      <label for="folder-path" class="jhipster-modules-form--field-label"> Project folder </label>

      <input type="text" id="folder-path" v-model="folderPath" class="jhipster-modules-form--field" data-selector="folder-path-field" />
    </div>

    <div class="jhipster-modules-form--field-line" v-if="selectedModule" v-for="property in selectedModule.properties">
      <label :for="`module-property-${property.key}`" class="jhipster-modules-form--field-label">
        <span class="jhipster-modules-form--field-description">{{ property.description }}</span>
        <span class="jhipster-modules-form--field-key"> -&nbsp;{{ property.key }}</span>
      </label>

      <input
        type="text"
        class="jhipster-modules-form--field"
        :id="`module-property-${property.key}`"
        :placeholder="property.example"
        @input="setStringProperty(property.key, $event.target.value)"
        :value="moduleProperties.get(property.key)"
        :data-selector="`property-${property.key}-field`"
        v-if="property.type === 'STRING'"
      />

      <input
        type="number"
        class="jhipster-modules-form--field"
        :id="`module-property-${property.key}`"
        :placeholder="property.example"
        @input="setNumberProperty(property.key, $event.target.value)"
        :value="moduleProperties.get(property.key)"
        :data-selector="`property-${property.key}-field`"
        v-if="property.type === 'INTEGER'"
      />

      <select
        class="jhipster-modules-form--field"
        :id="`module-property-${property.key}`"
        @change="setBooleanProperty(property.key, $event.target.value)"
        :data-selector="`property-${property.key}-field`"
        v-if="property.type === 'BOOLEAN'"
      >
        <option value="" :selected="moduleProperties.get(property.key) === undefined"></option>
        <option value="true" :selected="moduleProperties.get(property.key) === true">Yes</option>
        <option value="false" :selected="moduleProperties.get(property.key) === false">No</option>
      </select>
    </div>
  </aside>

  <div class="jhipster-modules-list">
    <div v-for="category in content.value().categories">
      <div>
        <h2 class="jhipster-module-category--name">{{ category.name }}</h2>
        <div v-for="module in category.modules" class="jhipster-module">
          <div class="jhipster-module--content" @click="selectModule(module.slug)" :data-selector="`${module.slug}-module-content`">
            <div class="jhipster-module--slug">{{ module.slug }}</div>
            <div class="jhipster-module--description">{{ module.description}}</div>

            <div class="jhipster-module--properties">
              <div v-for="property in mandatoryProperties(module.slug)" class="jhipster-module--property">
                <div class="jhipster-module--property-key">{{ property.key }}</div>
                <div class="jhipster-module--property-value" :data-selector="`module-${module.slug}-${property.key}-property-value`">
                  {{ moduleProperties.get(property.key) }}
                </div>
              </div>
            </div>

            <div class="jhipster-module--properties">
              <div v-for="property in optionalProperties(module.slug)" class="jhipster-module--property">
                <div class="jhipster-module--property-key">{{ property.key }}</div>
                <div class="jhipster-module--property-value" :data-selector="`module-${module.slug}-${property.key}-property-value`">
                  {{ moduleProperties.get(property.key) }}
                </div>
              </div>
            </div>
          </div>

          <button
            class="jhipster-module--apply-button"
            :disabled="disabledApplication(module.slug)"
            @click="applyModule(module.slug)"
            :data-selector="`module-${module.slug}-application-button`"
          >
            Apply
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
