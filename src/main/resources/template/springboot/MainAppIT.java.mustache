package {{packageName}};

import static org.assertj.core.api.Assertions.*;

import java.net.InetAddress;
import java.net.UnknownHostException;
import org.junit.jupiter.api.Test;
import org.mockito.MockedStatic;
import org.mockito.Mockito;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class {{mainClass}}AppIT {

  @Test
  void shouldMain() {
    assertThatCode(() -> {{mainClass}}App.main(new String[] {})).doesNotThrowAnyException();
  }

  @Test
  void shouldMainWithServerSslKeyStore() {
    System.setProperty("server.ssl.key-store", "https://localhost");
    assertThatCode(() -> {{mainClass}}App.main(new String[] {})).doesNotThrowAnyException();
  }

  @Test
  void shouldMainWithContextPath() {
    System.setProperty("server.servlet.context-path", "/chips");
    assertThatCode(() -> {{mainClass}}App.main(new String[] {})).doesNotThrowAnyException();
  }

  @Test
  void shouldMainWithoutHostAddress() {
    try (MockedStatic<InetAddress> inetAddress = Mockito.mockStatic(InetAddress.class)) {
      inetAddress.when(InetAddress::getLocalHost).thenThrow(new UnknownHostException());

      assertThatCode(() -> {{mainClass}}App.main(new String[] {})).doesNotThrowAnyException();
    }
  }
}
